<!-- add-assets.component.html -->
<div class="modal-content border-0 shadow-lg">

  <!-- Header -->
  <div class="modal-header">
    <h4 class="modal-title d-flex align-items-center">
      <div class="bg-white bg-opacity-25 p-2 rounded-circle me-3 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
        <fa-icon [icon]="data ? faEdit : faCube"></fa-icon>
      </div>
      <div>
        <span class="d-block">{{ data ? 'Edit Asset Record' : 'Create New Asset' }}</span>
        <small class="d-block fw-light fs-6 opacity-75">Fill in the details below</small>
      </div>
    </h4>
    <button type="button" class="btn-close btn-close-white" aria-label="Close" (click)="activeModal.dismiss()"></button>
  </div>

  <div class="modal-body p-4">
    <form [formGroup]="assetAddForm" (ngSubmit)="onFormSubmit()">

      <!-- SECTION 1: IDENTIFICATION -->
      <div class="section-title text-primary">Identification</div>
      <div class="row g-3 mb-3">
        <div class="col-md-6">
          <label class="form-label">PSS Asset Tag</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faTag"></fa-icon></span>
            <input type="text" class="form-control" formControlName="AssetTag" placeholder="e.g. PSS-1001">
          </div>
        </div>
        <div class="col-md-6">
          <label class="form-label">Serial Number</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faBarcode"></fa-icon></span>
            <input type="text" class="form-control" formControlName="SerialNumber" placeholder="e.g. SN-998877">
          </div>
        </div>
        <div class="col-12">
          <label class="form-label">Description</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faAlignLeft"></fa-icon></span>
            <input type="text" class="form-control" formControlName="Description" placeholder="Short description of the asset">
          </div>
        </div>
      </div>

      <!-- SECTION 2: CLASSIFICATION -->
      <div class="section-title text-primary">Classification & Specs</div>
      <div class="row g-3 mb-3">
        <div class="col-md-6">
          <label class="form-label">Group Category</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faLayerGroup"></fa-icon></span>
            <select class="form-select" formControlName="GroupAssetCategory">
              <option value="" disabled selected>Select Group</option>
              <option *ngFor="let val of GroupCategory" [value]="val">{{val}}</option>
            </select>
          </div>
        </div>
        <div class="col-md-6">
          <label class="form-label">Asset Category</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faLaptop"></fa-icon></span>
            <select class="form-select" formControlName="AssetCategory">
              <option value="" disabled selected>Select Category</option>
              <option *ngFor="let val of Category" [value]="val">{{val}}</option>
            </select>
          </div>
        </div>
        <div class="col-md-6">
          <label class="form-label">Specification</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faMicrochip"></fa-icon></span>
            <input type="text" class="form-control" formControlName="Specification" placeholder="e.g. 16GB RAM, i7">
          </div>
        </div>
        <div class="col-md-6">
          <label class="form-label">Condition</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faHeartbeat"></fa-icon></span>
            <select class="form-select" formControlName="AssetCondition">
              <option *ngFor="let val of condition" [value]="val">{{val}}</option>
            </select>
          </div>
        </div>
      </div>

      <!-- SECTION 3: ASSIGNMENT -->
      <div class="section-title text-primary">Location & Assignment</div>
      <div class="row g-3 mb-3">
        <div class="col-md-6">
          <label class="form-label">Location</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faMapMarkerAlt"></fa-icon></span>
            <input type="text" class="form-control" formControlName="Location">
          </div>
        </div>
        <div class="col-md-6">
          <label class="form-label">Checkout To</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faUser"></fa-icon></span>
            <input type="text" class="form-control" formControlName="CheckoutTo" placeholder="Employee Name">
          </div>
        </div>
        <div class="col-md-4">
          <label class="form-label">Cost Center</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faBuilding"></fa-icon></span>
            <select class="form-select" formControlName="CostCenter">
              <option *ngFor="let val of CostCenter" [value]="val">{{val}}</option>
            </select>
          </div>
        </div>
        <div class="col-md-4">
          <label class="form-label">Scrum Team</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faUsers"></fa-icon></span>
            <select class="form-select" formControlName="ScrumTeam">
              <option *ngFor="let val of ScrumTeam" [value]="val">{{val}}</option>
            </select>
          </div>
        </div>
        <div class="col-md-4">
          <label class="form-label">Release Train</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faTrain"></fa-icon></span>
            <select class="form-select" formControlName="AgileReleaseTrain">
              <option *ngFor="let val of AgileReleaseTrain" [value]="val">{{val}}</option>
            </select>
          </div>
        </div>
      </div>

      <!-- SECTION 4: PURCHASE & DATES -->
      <div class="section-title text-primary">Purchase Info</div>
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">PO Number</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faFileInvoice"></fa-icon></span>
            <input type="text" class="form-control" formControlName="PoNumber">
          </div>
        </div>
        <div class="col-md-4">
          <label class="form-label">Date Acquired</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faCalendarCheck"></fa-icon></span>
            <input class="form-control" placeholder="yyyy-mm-dd"
                   name="d_acquired" formControlName="DateAcquired" ngbDatepicker #d_dateAcquired="ngbDatepicker" (click)="d_dateAcquired.toggle()">
          </div>
        </div>
        <div class="col-md-4">
          <label class="form-label">Warranty Expires</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faShieldAlt"></fa-icon></span>
            <input class="form-control" placeholder="yyyy-mm-dd"
                   name="d_warranty" formControlName="Warranty" ngbDatepicker #d_warranty="ngbDatepicker" (click)="d_warranty.toggle()">
          </div>
        </div>
      </div>

    </form>
  </div>

  <div class="modal-footer">
    <button type="button" class="btn btn-light text-secondary border" (click)="activeModal.dismiss()">
      Cancel
    </button>
    <button type="button" class="btn btn-primary px-4" (click)="onFormSubmit()" [disabled]="isLoading || assetAddForm.invalid">
      <ng-container *ngIf="isLoading; else saveIcon">
        <span class="spinner-border spinner-border-sm me-2"></span> Saving...
      </ng-container>
      <ng-template #saveIcon>
        <fa-icon [icon]="faSave" class="me-2"></fa-icon>
        {{ data ? 'Update Asset' : 'Save Asset' }}
      </ng-template>
    </button>
  </div>

</div>
