<!-- asset-edit-modal.component.html -->
<div class="modal-content border-0 shadow-lg">

  <!-- Header -->
  <div class="modal-header">
    <h4 class="modal-title d-flex align-items-center">
      <div class="bg-white bg-opacity-25 p-2 rounded-circle me-3 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
        <fa-icon [icon]="faEdit"></fa-icon>
      </div>
      <div>
        <span class="d-block">Update Asset Record</span>
        <small class="d-block fw-light fs-6 opacity-75">Modify asset details below</small>
      </div>
    </h4>
    <button type="button" class="btn-close btn-close-white" aria-label="Close" (click)="activeModal.dismiss()"></button>
  </div>

  <div class="modal-body p-4">
    <form [formGroup]="assetAddForm" (ngSubmit)="onFormSubmit()">

      <!-- SECTION 1: IDENTIFICATION -->
      <div class="section-title">Identification</div>
      <div class="row g-3 mb-2">
        <div class="col-md-6">
          <label class="form-label">PSS Asset Tag</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faTag"></fa-icon></span>
            <input type="text" class="form-control" formControlName="AssetTag" placeholder="Tag ID">
          </div>
        </div>
        <div class="col-md-6">
          <label class="form-label">Serial Number</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faBarcode"></fa-icon></span>
            <input type="text" class="form-control" formControlName="SerialNumber" placeholder="Serial No.">
          </div>
        </div>
        <div class="col-12">
          <label class="form-label">Description</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faAlignLeft"></fa-icon></span>
            <input type="text" class="form-control" formControlName="Description">
          </div>
        </div>
      </div>

      <!-- SECTION 2: SPECS -->
      <div class="section-title">Technical Specification</div>
      <div class="row g-3 mb-2">
        <div class="col-md-6">
          <label class="form-label">Group Category</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faLayerGroup"></fa-icon></span>
            <select class="form-select" formControlName="GroupAssetCategory">
              <option *ngFor="let val of GroupCategory" [value]="val">{{val}}</option>
            </select>
          </div>
        </div>
        <div class="col-md-6">
          <label class="form-label">Asset Category</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faLaptop"></fa-icon></span>
            <select class="form-select" formControlName="AssetCategory">
              <option *ngFor="let val of Category" [value]="val">{{val}}</option>
            </select>
          </div>
        </div>
        <div class="col-md-8">
          <label class="form-label">Specification</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faMicrochip"></fa-icon></span>
            <input type="text" class="form-control" formControlName="Specification">
          </div>
        </div>
        <div class="col-md-4">
          <label class="form-label">Condition</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faHeartbeat"></fa-icon></span>
            <select class="form-select" formControlName="AssetCondition">
              <option *ngFor="let val of condition" [value]="val">{{val}}</option>
            </select>
          </div>
        </div>
      </div>

      <!-- SECTION 3: LOCATION -->
      <div class="section-title">Location & Assignment</div>
      <div class="row g-3 mb-2">
        <div class="col-md-6">
          <label class="form-label">Location</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faMapMarkerAlt"></fa-icon></span>
            <input type="text" class="form-control" formControlName="Location">
          </div>
        </div>
        <div class="col-md-6">
          <label class="form-label">Checkout To</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faUser"></fa-icon></span>
            <input type="text" class="form-control" formControlName="CheckoutTo">
          </div>
        </div>
        <div class="col-md-4">
          <label class="form-label">Cost Center</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faBuilding"></fa-icon></span>
            <select class="form-select" formControlName="CostCenter">
              <option *ngFor="let val of CostCenter" [value]="val">{{val}}</option>
            </select>
          </div>
        </div>
        <div class="col-md-4">
          <label class="form-label">Scrum Team</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faUsers"></fa-icon></span>
            <select class="form-select" formControlName="ScrumTeam">
              <option *ngFor="let val of ScrumTeam" [value]="val">{{val}}</option>
            </select>
          </div>
        </div>
        <div class="col-md-4">
          <label class="form-label">Release Train</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faTrain"></fa-icon></span>
            <select class="form-select" formControlName="AgileReleaseTrain">
              <option *ngFor="let val of AgileReleaseTrain" [value]="val">{{val}}</option>
            </select>
          </div>
        </div>
      </div>

      <!-- SECTION 4: PURCHASE -->
      <div class="section-title">Purchase & Dates</div>
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">PO Number</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faFileInvoice"></fa-icon></span>
            <input type="text" class="form-control" formControlName="PoNumber">
          </div>
        </div>
        <div class="col-md-4">
          <label class="form-label">Date Acquired</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faCalendarAlt"></fa-icon></span>
            <input class="form-control" placeholder="yyyy-mm-dd"
                   formControlName="DateAcquired" ngbDatepicker #d_acquired="ngbDatepicker" (click)="d_acquired.toggle()">
          </div>
        </div>
        <div class="col-md-4">
          <label class="form-label">Warranty Expires</label>
          <div class="input-group">
            <span class="input-group-text"><fa-icon [icon]="faShieldAlt"></fa-icon></span>
            <input class="form-control" placeholder="yyyy-mm-dd"
                   formControlName="Warranty" ngbDatepicker #d_warranty="ngbDatepicker" (click)="d_warranty.toggle()">
          </div>
        </div>
      </div>

    </form>
  </div>

  <div class="modal-footer">
    <button type="button" class="btn btn-light text-secondary border" (click)="activeModal.dismiss()">
      Cancel
    </button>
    <button type="button" class="btn btn-primary" style="background-color: #6610f2; border-color: #6610f2;"
            (click)="onFormSubmit()" [disabled]="isLoading || assetAddForm.invalid">
      <ng-container *ngIf="isLoading; else saveIcon">
        <span class="spinner-border spinner-border-sm me-2"></span> Updating...
      </ng-container>
      <ng-template #saveIcon>
        <fa-icon [icon]="faSave" class="me-2"></fa-icon> Save Changes
      </ng-template>
    </button>
  </div>

</div>
